<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenGV: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenGV
   </div>
   <div id="projectbrief">A library for solving calibrated central and non-central geometric vision problems</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_installation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_installation_0_5"></a>
Before you start</h1>
<p>If you are only interested in using the library under Matlab, now there is a precompiled mex-library for 64-bit systems available. You can download it from:</p>
<pre class="fragment">Windows: http://laurentkneip.github.io/publications/opengv.mexw64
Mac OSX: http://laurentkneip.github.io/publications/opengv.mexmaci64
</pre><p>These versions have been added around March 2016, so please be aware that later additions may not be included in this distribution. You can go immediately to <a class="el" href="page_matlab.html">Use under Matlab</a> to receive further instructions on the Matlab interface.</p>
<h1><a class="anchor" id="sec_installation_1"></a>
Downloading the source code</h1>
<p>OpenGV is freely available under</p>
<pre class="fragment">https://github.com/laurentkneip/opengv
</pre><p>You may first have to register on github.com. You can just download a zip-file with the code, but we strongly recommend that you make yourself familiar with git. Git is a distributed version-control and source code management system. By using git to clone the repository locally, you can easily get updates at a later stage, and also facilitate the integration of own improvements or extensions into the original repository on github. This is done using the pull-request mechanism.</p>
<p>To clone the library under Mac OSX or Linux, simply type (assuming that git is installed):</p>
<pre class="fragment">git clone https://github.com/laurentkneip/opengv
</pre><p>Under Windows you probably have a similar option. More information about git can be found here:</p>
<pre class="fragment">http://git-scm.com/
</pre><p>Follow the "Try git" link for an amazing interactive tutorial.</p>
<h1><a class="anchor" id="sec_installation_2"></a>
Installation under Linux</h1>
<ul>
<li>
<p class="startli">Setup the required tools for compilation of standard libraries under Linux (gcc compiler etc). Type:</p>
<pre class="fragment">sudo apt-get install build-essential
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">Install cmake. CMake is a cross-platform, open-source build system used for pretty much anything in the compilation process for the compilation/linking of the library. Type:</p>
<pre class="fragment">sudo apt-get install cmake
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">Install eigen3. Eigen3 is a powerful linear algebra library used for all computations in OpenGV. You can either use an installed version of a local install (unzipped version of Eigen3 downloaded from Eigen website).</p>
<pre class="fragment">sudo apt-get install cmake libeigen3-dev
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">Go to the top-level directory of OpenGV. Type:</p>
<pre class="fragment">mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make
</pre><p>If a message like "Could NOT find Eigen (missing: EIGEN_INCLUDE_DIR EIGEN_VERSION_OK)" appears. It's certainly because that you does not have Eigen3 installed on your computer system path. You can specify to cmake the path where Eigen is located by adding: </p><pre class="fragment">mkdir build &amp;&amp; cd build &amp;&amp; cmake .. -DEIGEN_INCLUDE_DIR:STRING="EigenIncludePath" &amp;&amp; make
</pre><p class="endli"></p>
</li>
<li>
Done. The default configuration does not build the tests or python-wrappers, please set the according variables in CMakeLists.txt to ON if you desire the tests or python-wrappers to be built as well. </li>
</ul>
<h1><a class="anchor" id="sec_installation_3"></a>
Installation under Windows</h1>
<ul>
<li>
<p class="startli">We need a suitable compiler for C++. We chose Visual Studio Express, which is free. Google for "Microsoft Visual Studio Express", it should be one of the first links. Make sure you download and install the "Windows Desktop version". If you are in a school setting without Administrator rights, just go to your local IT guy and ask him to install Microsoft Visual Studio on your machine.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">We also need CMake under Windows. Go to:</p>
<pre class="fragment">http://www.cmake.org/
</pre><p class="endli">and download the latest version. In a school setting without administrator rights, chose to download the zip-file. Extract it somewhere. </p>
</li>
<li>
<p class="startli">Open a new Developer Command Prompt for VS2012 and make sure all VS path variables are correctly set by checking the output of PATH. We also need to add the cmake-tools to the path. Add it by typing</p>
<pre class="fragment">cd C:\&lt;path to cmake&gt;\bin
PATH=%PATH%;%cd%;
</pre><p class="endli"></p>
</li>
<li>
Go to the opengv directory and add a build folder </li>
<li>
<p class="startli">Now go to the</p>
<pre class="fragment">opengv\build
</pre><p>directory, and setup the build process by typing:</p>
<pre class="fragment">cmake -G "Visual Studio 11" ..
</pre><p class="endli">You need to add the correct generator for your Visual Studio version. I downloaded Visual Studio 2012, so it's 11 :) </p>
</li>
<li>
<p class="startli">Now build the library by typing:</p>
<pre class="fragment">msbuild opengv.sln /p:Configuration=Release
</pre><p>inside the build directory. While there is not a single warning under Linux, there are thousands of warnings under Windows :) If anyone knows the reason, please let us know.</p>
<p class="endli"></p>
</li>
<li>
Note that we Eigen dependency is not longer included. It is better to get a fresh download of Eigen on your computer, and specify to cmake the Eigen include path with -DEIGEN_INCLUDE_DIR="path". </li>
</ul>
<h1><a class="anchor" id="sec_installation_35"></a>
Installation under OSX</h1>
<p>Has been succesfully tested as well.</p>
<ul>
<li>
Install homebrew: <a href="http://brew.sh/">http://brew.sh/</a> </li>
<li>
Type: "brew install cmake eigen" </li>
<li>
Compile using normal cmake procedure. </li>
</ul>
<h1><a class="anchor" id="sec_installation_36"></a>
Installing OpenGV on the host OS</h1>
<p>Installation on the host OS (including the headers) can be activated by simply launching the install target. By using "sudo make install" on Linux and OSX and by compiling the install target on the opengv Visual Studio solution in Windows. Sudo is required for system install. You can choose to have a local installation path by setting the cmake variable CMAKE_INSTALL_PREFIX to the path of your choice by using -DCMAKE_INSTALL_PREFIX:STRING="YourInstallPath" in the cmake command line. </p><pre class="fragment">cmake ../opengv 
  -DEIGEN_INCLUDE_DIR="EigenIncludePath"
  -DBUILD_TESTS=ON
  -DCMAKE_INSTALL_PREFIX="YourInstallPath"
make
make install #sudo not required since we use a local installation
</pre><h1><a class="anchor" id="sec_installation_4"></a>
Installing the Matlab-wrapper (Windows-version)</h1>
<ul>
<li>
<p class="startli">First setup the compiler from Matlab. Go to the matlab console and type</p>
<pre class="fragment">mex -setup
</pre><p>and chose the right compiler by following the instructions. You will have to chose the same compiler than the one you used for compiling the opengv library before-hand. Under Windows you might also run into the following problem. Depending on the distribution (e.g. R2012b), Matlab does not yet "know" your compiler (e.g. Visual Studio 2012), so you will have to additionally follow the instructions under</p>
<pre class="fragment">http://jimdavid.blogspot.com.au/2012/12/matlab-2012b-mex-setup-with-vs2012.html
</pre><p class="endli">to get things running. Also note that the Express compilers are not supported by Matlab, we ran into some issues when trying to use them. Please report if you have a solution to that. </p>
</li>
<li>
<p class="startli">Once this is done, you can compile the mex-file by going to the opengv/matlab folder and typing in the console</p>
<pre class="fragment">mex -I../include -I../EigenIncludePath -L../build/lib/Release -lopengv opengv.cpp
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">An additional note on 64-bit Windows/Matlab systems: If you have a Matlab version that is 64-bit, you will have to also compile OpenGV in 64-bit. You will have to follow two steps for this under Windows. The first one is to make sure that you open an x64 native tools command prompt to make the x64 Visual Studio compiler visible. The second one is to-when running cmake-extend the generator name by " Win64". The final command to run cmake finally looks as follows:</p>
<pre class="fragment">cmake -G "Visual Studio 11 Win64" ..
</pre><p class="endli">The actual build command stays the same. </p>
</li>
</ul>
<h1><a class="anchor" id="sec_installation_5"></a>
Installing the Matlab-wrapper (Linux-version)</h1>
<p>The following has been tested under Ubuntu 12.04 and a recent Matlab edition (&gt;2013) (thanks to Oliver Dunkley for providing this information).</p>
<ul>
<li>
Install Matlab with the provided installer, and then add the matlab-support package through the package-repositories. This basically takes care of setting all the compiler stuff, adding a launcher, etc. </li>
<li>
<p class="startli">In order to make Matlab know about the shared object opengv.so, the path to opengv.so has to be added to LD_LIBRARY_PATH. Open .bashrc and add the line</p>
<pre class="fragment">export LD_LIBRARY_PATH=&lt;path to OpenGV&gt;/build/lib:$LD_LIBRARY_PATH
</pre><p class="endli">and then start Matlab from the terminal, it'll know about opengv ... </p>
</li>
<li>
<p class="startli">Go to the opengv/matlab-folder inside Matlab, and issue the command</p>
<pre class="fragment">mex -I../include -I../EigenIncludePath -L../build/lib -lopengv opengv.cpp -cxx
</pre><p class="endli">Note the lib directory does not contain a Release subfolder under linux, and that the -cxx option has to be added. </p>
</li>
</ul>
<h1><a class="anchor" id="sec_installation_6"></a>
Installing the Matlab-wrapper (OSX-version)</h1>
<p>To compile the Matlab interface under OSX, use the same command as under Windows, with adapted library folder (-L../build/lib instead of -L../build/lib/Release). You of course need to make sure again that Matlab knows where to find the library, and that a suitable compiler is set up in Matlab as well.</p>
<h1><a class="anchor" id="sec_installation_7"></a>
Installing the python wrappers</h1>
<p>The compliation of the Python wrappers can be enabled by setting the option BUILD_PYTHON to ON. Note that the python wrappers depend additionally on boost, and that the wrapper currently only allows access to the central methods.</p>
<h1><a class="anchor" id="sec_installation_8"></a>
Using the OpenGV inside your cmake c++ project</h1>
<p>Once your have a system or local install of opengv you can use it in your own project. In your cmake file, add the search for the opengv library: </p><pre class="fragment">find_package(opengv REQUIRED)
if (opengv_FOUND)
  add_executable(main_opengv_demo main.cpp)
  target_link_libraries(main_opengv_demo opengv)
endif (opengv_FOUND)
</pre><p>Then run cmake for your project (if you are using a local install of opengv, you can specify where the library is located by using -Dopengv_DIR: </p><pre class="fragment"> cmake ../myproject
 -DCMAKE_BUILD_TYPE=RELEASE 
 -Dopengv_DIR:STRING=/home/Foo/Documents/Dev/opengv_Build/install/CMake/
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 8 2018 21:43:04 for OpenGV by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
